```markdown
import { コールアウト } from 'nextra/components'

# FeatBit エージェント

<コールアウト type="info">
FeatBit エージェントの一般的な紹介です。FeatBit エージェントの詳細なインストール手順については、[こちらのドキュメント](https://github.com/featbit/featbit-agent#installation) を参照してください。
</コールアウト>

FeatBit エージェント（GitHub リポジトリは[こちら](https://github.com/featbit/featbit-agent) ）は、FeatBit サーバーと SDK の間に位置し、FeatBit サーバーのキャッシュ読み取りレプリカと中継プロキシの両方を提供する小さなプログラムです。これにより、FeatBit をスケールアップして数万の接続された SDK をサポートすることができますが、FeatBit サーバーの負荷を増やすことなく行うことができます。

FeatBit エージェントには、以下の 4 つの重要な機能が提供されています：

* **性能**: FeatBit エージェントは、特徴フラグとセグメントをメモリ内にキャッシュします。リソースの最小限で実行されている単一の FeatBit エージェント インスタンスでも数千の WebSocket 接続をサポートでき、FeatBit サーバーを複製することなく数万の WebSocket 接続をサポートできます。&#x20;
* **低レイテンシー**: FeatBit エージェントはユーザーに近い場所で実行される能力を持っており、FeatBit サーバーから遠く離れた場所にいるユーザーのレイテンシーを大幅に低減させることができます。
* **データ保護**: FeatBit エージェントを顧客のインフラにデプロイすると、ユーザー使用データを FeatBit サーバーに転送せずにローカルに保持するように設定したり、FeatBit サーバーに送信する前にデータを匿名化するように設定したりすることができます。これにより、GDPR およびその他のデータ保護法に準拠し、ユーザーデータとプライバシーの保護が促進されます。
* **耐障害性**: FeatBit エージェントは再起動を生き抜き、FeatBit サーバーへの接続が切断されても適切に動作します。

## コンセプト

FeatBit エージェントは、2 つの異なるモードをサポートしています：

* エージェント: FeatBit サーバーへの接続をサポートし、動的な特徴フラグ、セグメント、および環境キーの同期ならびにその他の高度な機能をサポートします。
* オフライン: FeatBit サーバーへの接続を持たず、データと環境キーの完全な制御を提供します。

### エージェント モード

![](../relay-proxy/assets/featbit-agent/001.webp)

エージェントはデフォルト モードであり、ほとんどの場合にデフォルトで使用する必要があります。これは FeatBit サーバーに接続し、動的な特徴フラグ、セグメント、および環境キーの真実のソースとして使用します。

ユーザー使用データは、エージェント上に残すか、FeatBit サーバーに送信する前に匿名化するように設定できます。

デフォルトでは、エージェント モードでは、FeatBit サーバーから取得した特徴をメモリキャッシュに格納します。ただし、より永続的なストレージソリューションを使用したい場合があります。このため、FeatBit エージェントは、エージェントの起動時に渡すことができる Redis またはバックアップファイルをサポートしています。FeatBit エージェントは起動時に永続的バックアップオプションが指定されているかどうかをチェックし、その場合は内部キャッシュを満たすためにそれを使用します。これは、FeatBit サーバーに到達できない場合に有用です。

ストレージソリューションとして Redis を使用する場合、複数のエージェントが同じ Redis を共有できるため、FeatBit エージェントはクラスターに水平にスケーリングしてデータの整合性を維持できます。

### オフライン モード

![](../relay-proxy/assets/featbit-agent/002.webp)

オフラインモードは、FeatBit サーバーへの接続がない場合や、クライアントが受信するデータおよびアクセス可能な環境キーを完全に制御する必要がある場合に使用する必要があります。

このモードは、FeatBit サーバーに接続していないため、特徴フラグ、セグメント、および環境キーの JSON ダンプが必要です。FeatBit サーバーにこのダンプを FeatBit エージェント インスタンスに送信するように設定することができます。これは、FeatBit UI 上で中継プロキシを作成するか、データを含むダンプファイルを使用してエージェントを起動することができます。
```