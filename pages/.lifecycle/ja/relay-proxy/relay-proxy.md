# リレープロキシ

## 概要

このトピックでは、FeatBitリレープロキシの設定方法と、FeatBitエージェントとの接続方法について説明します。FeatBitエージェントが何であるかわからない場合は、この[ドキュメント](featbit-agent.md)をお読みください。

## エージェントのステータス

FeatBit UIでは、以下のエージェントのステータスが表示されます。

* 健康: エージェントは健全な状態であり、すべてが正常に動作しています
* 異常: エージェントに何か問題があります
* アクセス不可: エージェントが利用できません。通常、エージェントが起動していないか、エージェントのホストURLが正しくありません
* 認証失敗: これを見ると、FeatBitエージェントを起動するために使用したApiKeyがリレープロキシキーと一致しないことを意味します

## リレープロキシの作成と管理の制限

リレープロキシ構成を作成するには、**ManageRelayProxies**および**ListRelayProxies**の権限が必要です。ビルトインポリシー（オーナー、管理者、開発者）のいずれかを所有している場合は、これらの権限をすでに持っています。

![](../relay-proxy/assets/relay-proxy/001.webp)

## リレープロキシ構成の作成

**リレープロキシ**ページからリレープロキシの構成を作成できます。

1. **リレープロキシ**ページに移動します。

![](../relay-proxy/assets/relay-proxy/002.png)
2. ページの右上にある**追加**ボタンをクリックし、**リレープロキシの追加**パネルが表示されます\
![](../relay-proxy/assets/relay-proxy/003.png)
3. リレープロキシの人間が読める**名前**と説明を設定します。
4. スコープを設定します: エージェントにフィーチャーフラグとセグメントを同期する環境を選択します。
5. エージェントの名前とホストを設定します。
6. **保存**ボタンをクリックします。
7. 作成したキーを安全な場所にコピーして保存してください。このページを離れると、キーは隠されます。

![](../relay-proxy/assets/relay-proxy/004.png)

リレープロキシを作成した後、編集または削除することができます。また、このページから既存のリレープロキシを管理することもできます。

## フィーチャーフラグとセグメントをエージェントに同期する

現在、手動同期のみサポートしています。これを行うには、リレープロキシの編集ボタンをクリックし、編集パネルの同期ボタンをクリックして、選択したスコープのフィーチャーフラグとセグメントがエージェントに同期されます。

![](../relay-proxy/assets/relay-proxy/005.png)

## FeatBitエージェントのステータスを確認する

エージェントはさまざまなステータスを持つことがあります。更新するか、何か問題がある場合にデバッグするには、ステータスラベルをクリックしてエージェントの詳細なステータスが表示されるモーダルが表示されます。**lastSyncAt**の値はUTCタイムゾーンです。

![](../relay-proxy/assets/relay-proxy/006.png)

## リレープロキシの管理

リレープロキシを管理するには:

1. **リレープロキシ**ページに移動します。
2. リストからプロキシを見つけます。
3. **編集**ボタンまたは**削除**ボタンをクリックします。

リレープロキシのステータスを確認できます:

* すべてのエージェントが健全な状態にある場合、色は**緑**です
* 少なくとも1つのエージェントが健康でない場合、色は**赤**です

![](../relay-proxy/assets/relay-proxy/007.png)

## FeatBitエージェントをFeatBit UIに接続する

リレープロキシ構成を作成した後、どこか安全な場所に保存したキーを使用して、FeatBitエージェントを起動するためのApiKeyパラメータの値として使用してください。詳細は[Install FeatBit Agent](https://github.com/featbit/featbit-agent#installation)をお読みください。