# リレープロキシ

## 概要

このトピックでは、FeatBitリレープロキシ構成を作成し、FeatBitエージェントを接続する方法について説明します。FeatBitエージェントが何かわからない場合は、[ドキュメント](featbit-agent.md)をお読みください。

## エージェントのステータス

FeatBit UI では、以下のエージェントのステータスが表示されます。

* Healthy: エージェントは健全な状態であり、すべてが正常に動作しています
* Unhealthy: エージェントに問題があります
* Unreachable: エージェントが利用できません。通常、エージェントが開始されていないか、エージェントホストURLが正しくないためです
* Unauthorized: これを見ると、FeatBitエージェントを開始するために使用したApiKeyがリレープロキシキーと一致しないことを意味します

## リレープロキシの作成と管理権限の制限

リレープロキシの構成を作成する権限を持つには、**ManageRelayProxies** および **ListRelayProxies** の権限が必要です。ビルトインポリシー（Owner、Administrator、Developer）のいずれかを所有している場合は、これらの権限を既に持っています。

![](../relay-proxy/assets/relay-proxy/001.webp)

## リレープロキシ構成の作成

**Relay Proxies** ページからリレープロキシ構成を作成できます。

1. **リレープロキシ** ページに移動します。

![](../relay-proxy/assets/relay-proxy/002.png)

2. ページの右上にある **Add** ボタンをクリックし、**Add Relay Proxy** パネルが表示されます

![](../relay-proxy/assets/relay-proxy/003.png)

3. トークンに分かりやすい **Name** と説明を入力します。

4. スコープを設定します：フィーチャーフラッグとセグメントをエージェントに同期させたい環境を選択します。

5. エージェント名とホストを設定します

6. **Save** ボタンをクリックします。

7. キーはこのページを離れた後も安全な場所にコピーし保存してください。このページを離れると、キーは非表示になります。

![](../relay-proxy/assets/relay-proxy/004.png)

リレープロキシを作成した後は、編集や削除ができます。このページで既存のリレープロキシを管理することもできます。

## フィーチャーフラッグとセグメントをエージェントに同期する

現在、手動による同期のみをサポートしています。これを行うには、リレープロキシの編集ボタンをクリックし、編集パネルで同期ボタンをクリックし、選択したスコープのフィーチャーフラッグとセグメントがエージェントに同期されます。

![](../relay-proxy/assets/relay-proxy/005.png)

## FeatBitエージェントのステータスを確認する

エージェントにはさまざまなステータスがあります。それを更新したり、何かが間違っているかどうかをデバッグしたりするには、ステータスラベルをクリックし、エージェントの詳細ステータスが表示されるモーダルを表示します。 **lastSyncAt** の値はUTCタイムゾーンです。

![](../relay-proxy/assets/relay-proxy/006.png)

## リレープロキシの管理

リレープロキシを管理するには：

1. **リレープロキシ** ページに移動します。

2. リストからプロキシを見つけます。

3. **編集** または **削除** ボタンをクリックします

リレープロキシのステータスをチェックできます：

* すべてのエージェントが健全な状態である場合、色は **緑** です
* 少なくとも1つのエージェントが健全な状態でない場合、色は **赤** です

![](../relay-proxy/assets/relay-proxy/007.png)

## FeatBitエージェントをFeatBit UIに接続する

リレープロキシ構成を作成した後は、キーを安全な場所に保存してください。そのキーをApiKeyパラメータの値として使用してFeatBitエージェントを開始します。詳細は [FeatBit Agentのインストール](https://github.com/featbit/featbit-agent#installation) をお読みください。