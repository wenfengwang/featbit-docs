```markdown
import { Callout } from 'nextra/components'

# フラグの変動を作成する

### 概要 <a href="#overview" id="overview"></a>

このトピックでは、フィーチャーフラグの変動を作成および編集する方法について説明し、さまざまな種類のフラグ変動について概説します。

### フラグの種類の理解 <a href="#understanding-flag-types" id="understanding-flag-types"></a>

FeatBitではブール型フラグと多変量フラグをサポートしています。 **バリエーション** セクションでは、既存のフラグの変動を追加、編集、または削除することができます。

* **ブール** フラグには `true` または `false` の2つの変動があります。
* **多変量** フラグには2つ以上の変動があります。許可される変動はフラグの種類に依存します。多変量フラグの種類には、文字列、数字、JSONがあります。

**バリエーション** セクションでは、変動の種類を変更したり、既存のフラグの変動を追加、編集、または削除することができます。

ブール型変動の例は次のとおりです

![](../feature-flags/assets/create-flag-variations/001.webp)

#### 変動の削除

変動を削除すると、その変動がルールに使用されている場合や、対象ユーザーがそれに追加されている場合、警告メッセージが表示されます。変動を削除する前に、これらのルールを修正する必要があります。

### デフォルトのフラグ値の変更 <a href="#changing-default-flag-values" id="changing-default-flag-values"></a>

フィーチャーフラグを作成すると、その値の一部がデフォルトとして指定されます。 フラグのデフォルト値は、フラグがオンまたはオフの場合に提供される値であり、それ以外の場合は指定する必要があります。 フラグが **On** の場合のデフォルト値は、単一の変動または配信のいずれかになります。フラグが **Off** の場合のデフォルト値は、単一の変動のみになります。

たとえば、ブール型フラグの場合、オンのときに `true` をデフォルトのルールとして設定し、オフの変動として `false` を設定できます。 多変量フラグの場合、特定のターゲティングルールに一致するユーザーに表示される `変動1` をオンのデフォルトルールとして設定し、オフの変動として `変動2` を設定できます。さらに、特定のターゲティングルールに一致するユーザーには、`変動3` と `変動4` が表示されるように構成できます

デフォルト値は、フィーチャーフラグを作成するたびに自動的に指定されます。このデフォルト値を受け入れるか、変更することができます。

フラグのデフォルト値を変更することができます。 **OFF の場合、提供する** を変更するか、デフォルトルールの提供値を変更します。

![](../feature-flags/assets/create-flag-variations/002.webp)

### 多変量フラグの理解 <a href="#understanding-multivariate-flags" id="understanding-multivariate-flags"></a>

多変量フラグを使用すると、1つのフラグで同時に2つ以上の特徴の変動を提供することができます。多変量フラグに追加できる変動の数に制限はありませんので、複雑なユースケースや複数の特徴の変動を管理するために役立ちます。

多変量フラグの変動の種類には、文字列、数字、またはJSONが含まれます。

機能の提供を細分化するためにパーセンテージの配信を使用することができます。たとえば、文字列を変動として提供する多変量フラグを使用して、ディノゲームのさまざまな難易度を有効にすることができます。この例では、デフォルトルールは、ユーザーの10%に難しい難易度、10%に簡単な難易度、および80%に中程度の難易度を提供します。

パーセンテージの配信を持つフラグのイメージは次のとおりです。

![](../feature-flags/assets/create-flag-variations/003.webp)

さらに、カスタムルールを使用して、複数のユーザーセットを対象とし、配信をさらに細分化することができます。次の例では、最初のルールは20歳未満のすべてのユーザーに難しい難易度を提供します。 2番目のルールは、国がFRまたはITであるユーザーを対象にし、そのユーザーの10%に難しい難易度、10%に簡単な難易度、80%に中程度の難易度を提供します。 カスタムルールで対象外のすべてのユーザーにはデフォルトルールが提供されます。

カスタムルールを持つフラグのイメージは次のとおりです。

![](../feature-flags/assets/create-flag-variations/004.webp)

また、FeatBitの実験機能を使用してテストを実施するために多変量フラグを使用することもできます。詳細については、[実験の作成](../experimentation/creating-experiments.md) をお読みください。
```