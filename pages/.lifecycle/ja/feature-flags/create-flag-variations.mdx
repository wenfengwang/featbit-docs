import { Callout } from 'nextra/components'

# フラグのバリエーションの作成

### 概要 <a href="#overview" id="overview"></a>

このトピックでは、フィーチャーフラグのバリエーションの作成と編集方法、および異なる種類のフラグのバリエーションについて説明します。

### フラグの種類の理解 <a href="#understanding-flag-types" id="understanding-flag-types"></a>

FeatBitはブール値フラグと多変量フラグをサポートしています。**バリエーション**セクションでは、既存のフラグに対してバリエーションを追加、編集、または削除することができます:

* **ブール**フラグには「true」または「false」という2つのバリエーションがあります。
* **多変量**フラグは2つ以上のバリエーションを持つことができます。許可されるバリエーションはフラグの種類によって異なります。多変量フラグの種類には、文字列、数値、およびJSONがあります。

**バリエーション**セクションでは、バリエーションの種類を変更し、既存のフラグにバリエーションを追加、編集、または削除することができます。

以下はブールバリエーションの例です。

![](../feature-flags/assets/create-flag-variations/001.webp)

#### バリエーションの削除

バリエーションを削除すると、そのバリエーションがいくつかのルールで使用されている場合や、一部の対象ユーザーがそのバリエーションに追加されている場合、警告メッセージが表示されます。バリエーションを削除する前に、これらのルールを変更する必要があります。

### デフォルトフラグ値の変更 <a href="#changing-default-flag-values" id="changing-default-flag-values"></a>

フィーチャーフラグを作成すると、いくつかの値がデフォルトとして設定されます。フラグのデフォルト値は、フラグがオンまたはオフの場合に提供される値です（それ以外を指定しない限り）。フラグが**オン**の場合のデフォルト値は、単一のバリエーションまたはロールアウトのいずれかです。フラグが**オフ**の場合のデフォルト値は、単一のバリエーションのみです。

例えば、ブールフラグの場合、オンの場合のデフォルトルールには「true」が設定され、オフの場合のデフォルトバリエーションには「false」が設定されることがあります。多変量フラグの場合、オンの場合のデフォルトルールには「バリエーション2」が設定され、オフの場合のデフォルトバリエーションには「バリエーション1」が設定されます。また、特定の対象ルールに一致するユーザーには「バリエーション3」と「バリエーション4」が表示されるように構成することができます。

デフォルト値は、フィーチャーフラグを作成するたびに自動的に指定されます。デフォルト値を受け入れるか変更することができます。

フラグのデフォルト値を変更するには、**OFFの場合は、次の値を提供**を変更するか、デフォルトルールの提供値を変更します。

![](../feature-flags/assets/create-flag-variations/002.webp)

### 多変量フラグの理解 <a href="#understanding-multivariate-flags" id="understanding-multivariate-flags"></a>

多変量フラグを使用すると、1つのフラグで同時に2つ以上のバリエーションを提供できます。多変量フラグに追加できるバリエーションの数に制限はありませんので、複雑なユースケースや複数のバリエーションの管理に便利です。

多変量フラグのバリエーションの種類には、文字列、数値、またはJSONが含まれます。

パーセンテージのロールアウトを使用して、フィーチャーのロールアウトを細かく調整することができます。たとえば、文字列をバリエーションとして提供する多変量フラグを使用して、ディノゲームの異なる難易度を有効にするために、これらのタイプのロールアウトをユーザーに提供できます。この例では、デフォルトルールではユーザーの10%にハードモードが提供され、10%にはイージーモードが提供され、80%にはミディアムモードが提供されます。

パーセンテージロールアウトが設定されたフラグのイメージがこちらです：

![](../feature-flags/assets/create-flag-variations/003.webp)

カスタムルールを使用して、複数のユーザーセットをターゲットに指定し、より詳細なロールアウトを行うこともできます。次の例では、最初のルールでは20歳未満のすべてのユーザーにハードモードが提供されます。2番目のルールでは、国がFRまたはITであるユーザーをターゲットに指定し、これらのユーザーの10%にハードモードが提供され、10%にはイージーモードが提供され、80%にはミディアムモードが提供されます。カスタムルールでターゲットに指定されていないすべてのユーザーには、デフォルトルールが提供されます。

カスタムルールが設定されたフラグのイメージがこちらです：

![](../feature-flags/assets/create-flag-variations/004.webp)

多変量フラグを使用してFeatBitの実験機能を使用してテストを実施することもできます。詳細については、[実験の作成](../experimentation/creating-experiments.md) を参照してください。