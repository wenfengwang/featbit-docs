import { Callout } from 'nextra/components'

# フラグバリエーションの作成

### 概要 <a href="#overview" id="overview"></a>

このトピックでは、フィーチャーフラグのバリエーションを作成および編集する方法について説明し、異なるタイプのフラグバリエーションについて概説します。

### フラグタイプの理解 <a href="#understanding-flag-types" id="understanding-flag-types"></a>

FeatBitは、ブーリアンフラグと多変量フラグをサポートしています。**Variations**セクションでは、既存のフラグのバリエーションを追加、編集、または削除できます：

* **ブーリアン**フラグには`true`または`false`の2つのバリエーションがあります。
* **多変量**フラグは2つ以上のバリエーションを持つことができます。許可されるバリエーションはフラグのタイプに依存します。多変量フラグタイプには文字列、数値、JSONがあります。

**Variations**セクションでは、バリエーションタイプを変更したり、既存のフラグのバリエーションを追加、編集、または削除したりできます。

こちらはブーリアンバリエーションの例です：

![](../feature-flags/assets/create-flag-variations/001.webp)

#### バリエーションの削除

バリエーションを削除する際、そのバリエーションがいずれかのルールに使用されているか、特定のターゲットユーザーがそのバリエーションに割り当てられている場合は、警告メッセージが表示されます。バリエーションを削除する前に、それらのルールを修正する必要があります。

### デフォルトフラグ値の変更 <a href="#changing-default-flag-values" id="changing-default-flag-values"></a>

フィーチャーフラグを作成する際、いくつかの値がデフォルトとして指定されます。フラグのデフォルト値は、特に指定しない限り、フラグがオンまたはオフのときに提供される値です。フラグが**オン**の場合のデフォルト値は、単一のバリエーションまたはロールアウトのいずれかになります。フラグが**オフ**の場合のデフォルト値は、単一のバリエーションのみです。

例えば、ブーリアンフラグでは、オンのときに`true`をデフォルトルールとして、オフのときに`false`をデフォルトのオフバリエーションとして設定することができます。多変量フラグでは、オンのときに`variation 2`をデフォルトルールとして、オフのときに`variation 1`をデフォルトのオフバリエーションとして設定し、`variation 3`と`variation 4`は特定のターゲティングルールに一致するユーザーに表示されるように設定できます。

デフォルト値は、フィーチャーフラグを作成するたびに自動的に指定されます。デフォルト値をそのまま受け入れるか、変更することができます。

フラグのデフォルト値を変更するには、**If OFF, serve**の値を変更するか、デフォルトルールの提供値を変更します。

![](../feature-flags/assets/create-flag-variations/002.webp)

### 多変量フラグの理解 <a href="#understanding-multivariate-flags" id="understanding-multivariate-flags"></a>

多変量フラグを使用すると、1つのフラグで機能の2つ以上のバリエーションを同時に提供することができます。多変量フラグに追加できるバリエーションの数には制限がなく、複雑なユースケースや機能の複数バリエーションの管理に適しています。

多変量フラグのバリエーションタイプには、文字列、数値、またはJSONが含まれます。

パーセンテージロールアウトを使用して、機能のロールアウトを洗練させることができます。例えば、文字列をバリエーションとして提供する多変量フラグを使用して、恐竜ゲームの異なる難易度を有効にし、それらのタイプをユーザーにパーセンテージロールアウトで提供することができます。この例では、デフォルトルールは10%のユーザーにハード難易度、10%のユーザーにイージー難易度、80%のユーザーにミディアム難易度を提供します。

以下は、パーセンテージロールアウトを含むフラグの画像です：

![](../feature-flags/assets/create-flag-variations/003.webp)

カスタムルールを使用して、複数のユーザーグループをターゲットにし、ロールアウトをさらに洗練させることができます。次の例では、最初のルールは20歳未満のすべてのユーザーにハード難易度を提供します。2番目のルールは、FRまたはITの国のユーザーを対象にし、10%にハード難易度、10%にイージー難易度、80%にミディアム難易度を提供します。カスタムルールに含まれないすべてのユーザーにはデフォルトルールが提供されます。

以下は、カスタムルールを持つフラグの画像です：

![](../feature-flags/assets/create-flag-variations/004.webp)

多変量フラグを使用して、FeatBitの実験機能でテストを実施することもできます。詳細は[実験の作成](../experimentation/creating-experiments.md)をご覧ください。
