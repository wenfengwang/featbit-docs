# ユーザーセグメント

## 概要

このトピックでは、ユーザーセグメントの作成と管理方法について説明します。ユーザーセグメントを使用すると、個別にまたは属性によってユーザーグループをターゲットにすることができます。

## ユーザーセグメントの理解

ユーザーセグメントは、フラグのターゲティング動作を一括で管理するためのユーザーリストです。セグメントは、`beta-users` や `enterprise-customers` のようなユーザーグループを最新の状態に保つのに役立ちます。特定のグループに対して機能を素早くオンまたはオフにすることができます。

フラグとセグメントのターゲティングにはいくつかの違いがあるため、注意が必要です:

* セグメントは環境固有です。作成した環境以外の環境には表示されません。
* セグメントターゲティングは別のユーザーセグメントを参照することはできません。

## セグメントリストの使用

**セグメント** リストでセグメントを表示することができます。リストからセグメントを名前でフィルタリングすることができます。

![セグメントリスト](../../feature-flags/assets/users-and-user-segments/user-segments/001.webp)

## ユーザーセグメントの作成

新しいセグメントを作成するには、以下の手順を実行します:

1. **セグメント** リストに移動します。
2. **追加** をクリックします。"セグメントの追加" パネルが表示されます。

![セグメントの追加](../../feature-flags/assets/users-and-user-segments/user-segments/002.webp)
3. セグメントにわかりやすい **名前** を付けます。
4. (オプション) **説明** を追加します。
![セグメントの追加](../../feature-flags/assets/users-and-user-segments/user-segments/003.webp)
5. **保存** をクリックします。セグメントの **ターゲティング** タブが表示されます。

## ユーザーセグメントのカスタマイズ

セグメントをカスタマイズして、異なるユーザーや属性に適用したり、セグメントからユーザーや属性を除外したりすることができます。セグメントのターゲティングルールは、フラグのターゲティングルールと同じように機能します。詳細については、[ユーザーのターゲティング](../targeting-users-with-flags/targeting-rules.md) を参照してください。

セグメントをカスタマイズするには、以下の手順を実行します:

1. 変更したいユーザーセグメントの **ターゲティング** タブに移動します。
2. **ユーザーの含む** または **ユーザーの除外** オプションを使用して、個別にユーザーをターゲットにします。
![ユーザーターゲティング](../../feature-flags/assets/users-and-user-segments/user-segments/004.webp)
3. **ルール** の横にある **+** ボタンをクリックして、このセグメントのカスタムルールを作成します。カスタムルールメニューが表示されます:\
![カスタムルールの追加](../../feature-flags/assets/users-and-user-segments/user-segments/005.webp)
4. ルールに対して **属性**、**演算子**、および **値** を指定します。
5. 追加の条件を指定したい場合は、ルールの条件の右にある **+** ボタンをクリックします。
![追加の条件](../../feature-flags/assets/users-and-user-segments/user-segments/006.webp)
6. **保存** をクリックします。

> セグメントルールのロジックの理解
>
> セグメントのルールを指定すると、FeatBit が上から下の順に解析します。作成したルールの順序に基づいて、セグメントターゲティングが適用される方法を変更することができます。
>
> ユーザーがルールのいずれかに一致した場合、ユーザーは「含まれるユーザー」として扱われます。

## セグメントの削除

セグメントを削除するには、**セグメント** リストで削除したいセグメントを見つけ、**削除** をクリックします。

![セグメントの削除](../../feature-flags/assets/users-and-user-segments/user-segments/007.webp)

セグメントを使用しているフィーチャーフラグがある場合は、まずフィーチャーフラグから削除してください。

![フィーチャーフラグからの削除](../../feature-flags/assets/users-and-user-segments/user-segments/008.webp)