# ユーザーセグメント

## 概要

このトピックでは、ユーザーセグメントの構築と管理方法について説明します。ユーザーセグメントを使用すると、個々のユーザーまたは属性でグループ化されたユーザーを対象にすることができます。

## ユーザーセグメントの理解

ユーザーセグメントとは、一括でフラグの対象となるユーザーのリストです。セグメントは、`beta-users`や`enterprise-customers`などのユーザーグループを最新の状態に保つために役立ちます。特定のグループに対して素早く機能をオンまたはオフにすることができるため、セグメントは自信を持って利用できます。

フラグとセグメントの対象設定にはいくつかの違いがありますが、注意すべき点があります。

* セグメントは環境固有です。作成した環境以外には表示されません。
* セグメントの対象設定では、他のユーザーセグメントを参照することはできません。

## セグメントリストの使用

**セグメント**リストでセグメントを表示することができます。リストからセグメントを名前でフィルタリングすることができます。

![](../../feature-flags/assets/users-and-user-segments/user-segments/001.webp)

## ユーザーセグメントの作成

新しいセグメントを作成するには：

1. **セグメント**リストに移動します。
2.  **追加**をクリックします。**セグメントを追加**パネルが表示されます。

![](../../feature-flags/assets/users-and-user-segments/user-segments/002.webp)
3. セグメントにわかりやすい**名前**を付けます。
4. (任意) **説明**を追加します。
![](../../feature-flags/assets/users-and-user-segments/user-segments/003.webp)
5. **保存**をクリックします。セグメントの**対象設定**タブが表示されます。

## ユーザーセグメントのカスタマイズ

セグメントをカスタマイズして、異なるユーザーや属性に適用したり、セグメントの**対象設定**タブでユーザーや属性を除外したりすることができます。セグメントの対象設定ルールは、フラグの対象設定ルールと同様の方法で機能します。詳細については、[ユーザーの対象設定](../targeting-users-with-flags/targeting-rules.md)を参照してください。

セグメントをカスタマイズするには：

1. 変更したいユーザーセグメントの**対象設定**タブに移動します。
2. **含めるユーザー**または**除外するユーザー**のオプションでユーザーを個別に対象にします。
![](../../feature-flags/assets/users-and-user-segments/user-segments/004.webp)
3. **ルール**の横にある**+**ボタンをクリックして、このセグメントのカスタムルールを作成します。カスタムルールメニューが表示されます:\
![](../../feature-flags/assets/users-and-user-segments/user-segments/005.webp)
4. ルールに**属性**、**演算子**、および**値**を指定します。
5. 追加の条件を指定する場合は、ルール条件の横にある**プラスボタン**をクリックします。
![](../../feature-flags/assets/users-and-user-segments/user-segments/006.webp)
6. **保存**をクリックします。

> セグメントルールロジックの理解
>
> セグメントのルールを指定すると、FeatBitはルールを上から下の順に解析します。作成するルールの順序に基づいてセグメントの対象設定が適用される方法を変更できます。
>
> ユーザーがルールのいずれかに一致した場合、ユーザーは**含まれるユーザー**として扱われます。

## セグメントの削除

セグメントを削除するには、**セグメント**リストで削除したいセグメントを見つけ、**削除**をクリックします。

![](../../feature-flags/assets/users-and-user-segments/user-segments/007.webp)

セグメントが機能フラグで使用されている場合は、まずそれを機能フラグから削除する必要があります。

![](../../feature-flags/assets/users-and-user-segments/user-segments/008.webp)