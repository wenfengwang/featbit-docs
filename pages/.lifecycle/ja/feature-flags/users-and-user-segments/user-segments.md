# ユーザーセグメント

## 概要

このトピックでは、ユーザーセグメントの構築と管理方法について説明します。ユーザーセグメントを利用することで、個々のユーザーや属性に基づいたグループをターゲットにすることができます。

## ユーザーセグメントについての理解

ユーザーセグメントは、フラグのターゲティング動作を一括で管理するために利用できるユーザーのリストです。`beta-users`や`enterprise-customers`のようなユーザーグループを最新の状態に保つのに役立ち、特定のグループに対して機能を迅速にオンまたはオフにすることができます。

フラグターゲティングとセグメントターゲティングの間には、以下のような違いがあります:

* セグメントは環境固有です。作成した環境以外では利用できません。
* セグメントターゲティングでは、他のユーザーセグメントを参照することはできません。

## セグメントリストの利用

**セグメント**リストでセグメントを表示できます。リストから、名前によってセグメントをフィルタリングすることができます。

![](../../feature-flags/assets/users-and-user-segments/user-segments/001.webp)

## ユーザーセグメントの作成

新しいセグメントを作成するには:

1. **セグメント**リストに移動します。
2. **追加**をクリックします。セグメント追加パネルが表示されます。

![](../../feature-flags/assets/users-and-user-segments/user-segments/002.webp)
3. セグメントにわかりやすい**名前**を付けます。
4. （オプション）**説明**を追加します。
![](../../feature-flags/assets/users-and-user-segments/user-segments/003.webp)
5. **保存**をクリックします。セグメントの**ターゲティング**タブが表示されます。

## ユーザーセグメントのカスタマイズ

セグメントの**ターゲティング**タブで、異なるユーザーや属性に適用するカスタマイズを行ったり、ユーザーや属性を除外したりすることができます。セグメントのターゲティングルールは、フラグのターゲティングルールと同様に機能します。詳細は[ユーザーのターゲティング](../targeting-users-with-flags/targeting-rules.md)をご覧ください。

セグメントをカスタマイズするには:

1. 変更したいユーザーセグメントの**ターゲティング**タブに移動します。
2. **ユーザーを含む**または**ユーザーを除外する**オプションで個別のユーザーをターゲットにします。
![](../../feature-flags/assets/users-and-user-segments/user-segments/004.webp)
3. **ルール**の横にある**+**ボタンをクリックして、このセグメント用のカスタムルールを作成します。カスタムルールメニューが表示されます:\
![](../../feature-flags/assets/users-and-user-segments/user-segments/005.webp)
4. ルールの**属性**、**オペレーター**、および**値**を指定します。
5. さらに条件を追加したい場合は、ルール条件の横にある**+ボタン**をクリックします。
![](../../feature-flags/assets/users-and-user-segments/user-segments/006.webp)
6. **保存**をクリックします。

> セグメントルールのロジックについて
>
> セグメントにルールを指定すると、FeatBitはそれらを上から下へと順番に解析します。ルールの作成順に基づいて、セグメントターゲティングがどのように適用されるかを変更することができます。
>
> ユーザーがルールのいずれかに一致する場合、そのユーザーは**含まれるユーザー**として扱われます。

## セグメントの削除

セグメントを削除するには、**セグメント**リストで削除したいセグメントを見つけて、**削除**をクリックします。

![](../../feature-flags/assets/users-and-user-segments/user-segments/007.webp)

機能フラグがセグメントを使用している場合は、先にその機能フラグからセグメントを削除する必要があります。

![](../../feature-flags/assets/users-and-user-segments/user-segments/008.webp)
