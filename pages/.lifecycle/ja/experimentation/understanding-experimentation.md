# 実験の理解

## 概要

このトピックでは、FeatBitの実験機能の概念と価値について説明します。実験を使用すると、チームが関心を持つメトリクスを追跡して、フラグの効果をユーザーに対して測定することができます。

## 実験の理解

実験を使用すると、アプリやインフラストラクチャーに展開する機能の影響を検証することができます。ページビュー、クリック、読み込み時間、インフラストラクチャーコストなどの測定ができます。

作成したメトリクスをFeatBit環境のフラグと関連付けることで、ユーザーの行動の変化をフラグの評価に基づいて測定することができます。これにより、開発チームがリリースする機能がビジネス目標に合致するように、より情報を得ることができます。

上の画像は、ユーザーがデモを簡単に完了できるようにしたバージョン（v1またはv2）の**ABテスト**の結果を示しています。バージョン2が競争に勝ち、バージョン2が最終バージョンの**はじめに**デモになりました。

## 実験の使用方法

私たちは、実験を組織内のさまざまな役割の人々が利用できるように設計しました。例えば、プロダクトマネージャーは、出荷した機能の価値を測定するために実験を使用できます。デザイナーは、UIおよびUXコンポーネントの多変量テストを実施するために実験を使用できます。DevOpsエンジニアは、インフラストラクチャーの変更の有効性とパフォーマンスをテストするためにそれらを使用できます。

実験によって、フラグに肯定的な影響があるとわかれば、そのフラグをユーザーベース全体に展開してその価値を最大化することができます。また、1つのフラグから得られる結果が気に入らない場合は、それをオフにしてユーザーベースへの影響を最小化することができます。

実験で行えることの一部は次のとおりです：

* A/B/nテスト、マルチバリエートテストとも呼ばれる
* 実験の開始と停止をいつでも行い、データの記録タイミングを細かく制御する
* 実験結果の信頼区間を確認し、最も影響があると信頼できるバリエーションを選択する
* 特定のユーザーグループを実験に公開し、テスト対象の対象を絞り込む
* 複数のバリエーションをテストして新しいアイデアを検証する
* 機能を構築する前にユーザーベースの関心を確認する
* 機能、サービス、またはAPIのパフォーマンスデータを収集する
* ユーザーが好む機能を特定することにより、製品の採用を促進する
* 成功したバリエーションをユーザーベース全体に展開することにより、収益とコンバージョン率を向上させる
* その他

## 実験結果の分析

実験データは、フラグの詳細ページの**実験**タブで収集され、ほぼリアルタイムで表示されます。

実験データが収集されるにつれて、FeatBitはテストしているすべてのバリエーションの中で最も適切な選択肢となるバリエーションを計算します。望む影響を持つフラグのバリエーションを決定した後、FeatBitのパーセンテージ展開機能を使用して、徐々にそのバリエーションをユーザー全体の100％に展開することができます。パーセンテージ展開についての詳細は、[パーセンテージ展開](../feature-flags/targeting-users-with-flags/percentage-rollouts.md)を読んでください。

Clickhouse＆APIを使用して、実験データを外部のデスティネーションにエクスポートすることができます。

## 実験のベストプラクティス

実験を使用する際には、次のベストプラクティスを考慮してください：

* **開発する新機能には常にフラグを使用してください。** これはベストプラクティスですが、特にFeatBitで実験を実施する場合に役立ちます。すべての機能にフラグを立てることで、製品のあらゆる側面をすばやく実験に変えることができます。
* **最初の日から実験を考慮してください。** 機能開発の計画段階で仮説を立て、機能がローンチされるとすぐに実験を実施できるようにしておくことが重要です。
* **測定対象を定義してください。** チームと協力して最適化する具体的なメトリクスと成功の定義について合意してください。
* **実験をお互いに関連づけて計画してください。** 複数の実験を同時に実施する場合は、類似または競合するデータが収集されないようにする必要があります。
* **ログイン前とログイン後にアプリにインタラクションを行うユーザーを関連付けてください。** ユーザーがログアウト状態とログイン状態の両方から実験にアクセスする場合、それぞれの状態で異なるユーザーキーが生成されます。

実験を使用してさまざまな結果を測定することができます。いくつかの例としては、次のものがあります：

* Elasticsearch対SOLR対Algoliaなどの異なる検索実装の効果のテスト
* 出荷している機能がページの読み込み時間を増加または減少させているかの追跡
* ユーザーがさまざまなページ要素をどのくらい頻繁にクリックするかを監視して、変換率を計算する

## 実験のイベントの理解

実験のイベントとは、SDKが使用しているイベントのことです。これらのイベントは、実験のイベント数に影響を及ぼします。実験のイベントには2つのカテゴリがあります：

* **メトリクスイベント**：実験の実行に使用されるメトリクスからの`click`、`page view`、および`custom`イベント。
* **評価イベント**：実験中のターゲティングルールを持つフラグからの`feature`イベント。

#### メトリクスイベントの理解

すべてのFeatBit SDKは、次のようにSDKのメソッドを呼び出すときに`custom`メトリクスイベントを送信します。

```
fbClient.sendCustomEvent([{
  eventName: 'your event name',
  numericValue: 1
}])
```

`track`メソッドについての詳細は、[SDKs](https://github.com/featbit/featbit-js-client-sdk#experiments-abn-testing)を読んでください。

#### 評価イベントの理解

すべてのFeatBit SDKは、実験中のフラグの`.variation()`メソッドを呼び出すと、`feature`変換イベントを送信します。