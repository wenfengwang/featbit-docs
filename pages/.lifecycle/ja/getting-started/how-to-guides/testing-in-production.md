# 本番でのテスト

> **本番でのテスト**とは何ですか
>
> 本番環境を再現することは不可能です。新機能の実世界におけるパフォーマンスを確認する唯一の確実な方法は、実際のユーザーでテストすることです。フィーチャーフラグを使用すると、本番環境で安全にテストできます。FeatBitのターゲティング機能を活用して、新機能を特定のユーザーのサブセットに公開できます。システムパフォーマンスに問題がある場合、展開を停止し、インシデントの影響範囲を制限できます。しかし、すべてがうまくいけば、新機能を徐々に広い観客に展開できます。

## 前提条件

以下の「はじめに」の最後の3つのチュートリアルを完了していることを前提とします。

* 「デモ用の2つのフラグを作成する」チュートリアルで、`game runner`および`difficulty mode`という2つのフィーチャーフラグを作成しました。
* "`Dino Game`デモ"とのやり取りについて基本的な経験があります。
* プログラムまたは「Dino Game」デモにSDKを接続する方法について知っています：
  * デモのコードサンプルをダウンロード
  * SDKを初期化
  * カスタマイズされたプロパティを持つユーザーを識別
  * フィーチャーフラグを実装して機能を提供および制御

## 個々のユーザーを使用して本番でテストする

ゲームはオンラインで展開されています。すべてのプレイヤーにリリースする前に、いくつかの親しい友人でテストしたいと思っています。"ユーザーのターゲティング"セクションを使用して友人を「許可リスト」に追加できます。

「ゲームランナー」フィーチャーフラグのターゲティングページに移動し、「ターゲティングユーザー」セクションを展開します。各バリエーション`true`および`false`に対して2つの選択リストが表示されます。

友人を"許可リスト"に追加するには、次のようにします：

1. 友人のゲームのユーザー名を`true`の選択リストの下に追加します。
2. フィーチャーフラグをオンにします。
3. デフォルトのルールを`false`に設定します。

上記の3つの手順は、FeatBitに対してフィーチャーフラグ「ゲームランナー」がオンになっていることを伝えます。ターゲティングユーザーセクションの`true`リストにあるユーザーだけが`true`バリエーション（ゲームをプレイできる）を持つことができます。

![](../../getting-started/assets/testing-in-production/001.webp)

### ユーザーはどこから来るのですか？

`true`リストのユーザーは、次の3つの方法でインポートできます：

1. "データ同期"セクションでは、定義済みのJSONファイルを通じてすべてのユーザーをFeatBitにインポートできます。
![](../../getting-started/assets/testing-in-production/002.webp)
2. ユーザーが実行中のアプリケーションに登録した場合、ユーザー情報がシステムに保存されます。
![](../../getting-started/assets/testing-in-production/003.webp)
3. "ターゲティングユーザー"の選択リストに直接ユーザー名を入力することもできます。ユーザーが存在しない場合、"エンドユーザー"リストに新しいユーザーが追加されます。

ユーザー情報は「エンドユーザー」ページで見つけることができます。

![](../../getting-started/assets/testing-in-production/004.webp)

## QAセグメントを使用して本番でテストする

友達はあなたのゲームが好きで、公開前に常に新機能をテストしたいと思っています。彼らは再利用可能なテストユーザーとなりました（QAチームのようなもの）。次回新しいゲームの機能を展開する際に作業を簡素化するために、「QA」というセグメントを作成できます。

「セグメント」ページに移動し、名前を「私の素敵なQAチーム」とするセグメントを作成します。

![](../../getting-started/assets/testing-in-production/005.webp)

セグメントの詳細ページで、「含めるユーザー」リストに素敵なテストユーザーを追加し、保存をクリックします。このセグメントは異なるフィーチャーフラグ間で共有できます。

![](../../getting-started/assets/testing-in-production/006.webp)

フィーチャーフラグリストに戻り、「ゲームランナー」フィーチャーフラグの「ターゲティング」ページを開きます。

1. 「ターゲティングユーザー」セクションの`true`リストのすべてのユーザーを削除します。
2. カスタマイズされたルールに「私の素敵なQAチーム」を追加します。
   1. 新しいカスタマイズされたルールを追加し、その名前（たとえば、「本番でのテストルール」）を付けます。
   2. IF条件として「ユーザーがセグメントに属する」を選択します。
   3. 「私の素敵なQAチーム」をセクションリストに選択します。
   4. サーブエリアで`true`を選択します。

![](../../getting-started/assets/testing-in-production/007.webp)

上記の構成は、「私の素敵なQAチーム」のセグメントにユーザーがいる場合、DinoGameがこのユーザーにリリースされることを意味します。この構成は、「難易度モード」などの他の機能についても本番でのテストのために他のフィーチャーフラグで実装できます。

![](../../getting-started/assets/testing-in-production/008.webp)

このセグメントは再利用可能なセグメントと呼ばれ、異なるフィーチャーフラグで使用されることができます。1つのセグメントを更新すると、このセグメントを使用するすべてのフィーチャーフラグが更新されます。