import { Callout } from 'nextra/components'

# ターゲットドプログレッシブデリバリー

> **ターゲットドプログレッシブデリバリー**
>
> 彼らはチームに壊れずに速く進む自信を与えます。 FeatBitでは、正確なユーザーターゲティングとフィーチャーフラグのルールを使用して、さまざまなターゲティングされた展開を実現できます：リングデプロイメント、パーセンテージデプロイメント、キャナリーローンチなど。 これらのターゲティングされた、徐々に増加するリリース戦略、またはリリースプログレッションは、ビッグバンウォーターフォールリリースよりもはるかにリスクが少なくなります。 コードを高速に、リスクを低減し、顧客体験を継続的に改善するために、ターゲットドプログレッシブデリバリーテクニックを使用してください。

## 必要条件

以下の条件を満たしていることを前提とします：

* "スタートガイド"の最後の3つのチュートリアルをすでに完了しています：
  * チュートリアル[デモ用の2つのフィーチャーフラグの作成](../create-two-feature-flags.md)で、`game runner`と`difficulty mode`という2つのフィーチャーフラグを作成しました。
  * [デモとのやり取り方法](../try-interacting-with-the-demo.md)について基本的な知識があります。
  * プログラムまたは「Dino Game」デモに[SDKを接続する方法](../connect-an-sdk/)を知っています。
    * デモコードのサンプルをダウンロードする
    * SDKの初期化
    * カスタムプロパティを持つユーザーを識別します。
    * 提供するためにフィーチャーフラグを実装します。

## ゲームを段階的にリリースする

「Dino Game」を本番でテストした後でも、ゲームが正常に実行されるか心配です。すべてのユーザーへのインシデントを回避するために、フィーチャーを段階的にリリースします。デフォルトでは、以下のペースでフィーチャーをリリースする予定です：

1. 開始時に5％
2. 以前の5％のユーザーに対してバグがない場合、20％
3. 以前の20％のユーザーに明らかなバグがない場合、50％
4. 以前の50％のユーザーに明らかなバグがない場合、100％

これを実現するために、デフォルトルールを変更して、「ロールアウトの割合」を提供し、例えば「true」に10％、「false」に90％を割り当てるだけです。

![](../../getting-started/assets/targeted-progressive-delivery/001.webp)

これは、10％のユーザーが「true」のバリエーションを受け取り、DinoGameが「true」のバリエーションを受け取ったユーザーにリリースされることを意味します。

![](../../getting-started/assets/targeted-progressive-delivery/002.webp)

リリースプロセス中に悪いフィードバック（バグ）に遭遇した場合、ロールアウトの割合を再割り当てすることで、フィーチャーリリースをすぐにロールバックすることができます。

<Callout type="info">
  ロールアウトの割合アルゴリズムは、通常のランダム分布アルゴリズムであり、エンドユーザーIDに基づいて計算されます。

  ![](../../getting-started/assets/targeted-progressive-delivery/003.webp)
</Callout>

## 組織に段階的にリリースする

場合によっては、すべてのユーザーではなく特定の組織に段階的にリリースしたい場合があります。そのためには、「ルール」セクションでルールを作成することができます。

### ルールのためのユーザープロパティを作成する

まず、ポータルでルールプロパティを作成する必要があります。[エンドユーザー](../../getting-started/user-data/users)ページに移動し、「Properties」ボタンをクリックします。

![](../../getting-started/assets/targeted-progressive-delivery/004.webp)

新しいプロパティ名「orgId」を追加し、「保存」をクリックして作成します。

![](../../getting-started/assets/targeted-progressive-delivery/005.webp)

作成したプロパティに定義済みの値を追加することができます。

![](../../getting-started/assets/targeted-progressive-delivery/006.webp)

### プロパティと値をシステムに渡す（開発者向け）

SDKを初期化する際に、「orgId」とその値がFeatBitシステムに渡されていることを確認してください。上記のイメージで設定したキーが、SDKの初期化コードで渡したものと同じであることを確認してください。

![](../../getting-started/assets/targeted-progressive-delivery/007.webp)

FeatBitシステムは、SDKを介して渡したプロパティとその値を、ポータルで設定したプロパティと値と比較します。

### Company AAに段階的にリリースする

「game runner」フィーチャーフラグの「Targeting」ページに戻ります。作成した「orgId」プロパティを持つルールを作成します。

1. 新しいルールを追加し、名前を付けます（例：Company AAに段階的にリリース）。
2. 条件を追加します。ユーザーの「orgId」がリスト内にある場合、このユーザーには「true」バリエーションの機会が10％あります。

![](../../getting-started/assets/targeted-progressive-delivery/008.webp)

上記のルールを設定することで、Company AAの10％のユーザーにDinoGameがリリースされます。リリースプロセス中に悪いフィードバック（バグ）に遭遇した場合、ロールアウトの割合を再割り当てすることで、フィーチャーリリースをすぐにロールバックすることができます。