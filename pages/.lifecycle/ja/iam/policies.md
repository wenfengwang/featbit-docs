# ポリシー

FeatBitでアクセスを管理するには、ポリシーを作成し、それらをIAMアイデンティティ（ユーザー、ユーザーグループ）またはFeatBitリソースにアタッチします。ポリシーは、アイデンティティまたはリソースに関連付けられているときに、その権限を定義するFeatBitのオブジェクトです。FeatBitは、IAMメンバーがリクエストを行うとき、これらのポリシーを評価します。ポリシーの権限によって、リクエストが許可されるか拒否されるかが決まります。

## コントロールレベル（リソースタイプ）

FeatBitポリシーでは、次の3つのコントロールレベル（リソースタイプとも呼ばれます）がサポートされています：

* **All**、メンバー（またはメンバーグループ）に対してすべてのリソースを許可または拒否するかを制御します。
* **General**、アカウント、IAM、プロジェクトのリソースレベルに対するメンバーのアクセス権限を制御します。
* **Project**、プロジェクトに対するメンバーのアクセス権限を制御します。
* **Environment**、すべての環境に対するメンバーのアクセス権限を制御します。

## 組み込みポリシー

FeatBitには、変更できない3つの組み込みポリシーが提供されています。必要に応じて、コピーを作成し、自分のニーズに合わせて変更することができます。

![](../iam/assets/policies/001.webp)

## ポリシーの追加

1\. ポリシーのページに移動し、[追加]ボタンをクリックします。

2\. [ポリシーの追加]ドロワーで、新しいポリシーの名前と説明を入力し、**[保存]**をクリックして作成します。

3\. 新しいアイテムがポリシーリストに追加されます。名前でポリシーをフィルタリングして、作成したばかりのポリシーを見つけることができます。

4\. 作成したばかりのポリシーをクリックします（または**[詳細]**アクションボタン）。ポリシー詳細ページに移動します。

## ポリシー詳細ページ

ポリシー詳細ページは6つの部分で構成されています：

* ポリシーの名前と説明
* ポリシーのタイプ（システムによって生成されます）
* リソース名
* 権限リスト、ポリシーの権限を追加、更新、削除することができます
* チーム、このポリシーをメンバーに割り当てたり、メンバーからポリシーを削除することができます
* グループ、このポリシーをグループに割り当てたり、グループから削除することができます

## 権限の追加

1\. `(+)`アイコンをクリックすると、新しい空の権限フォームが表示されます。

2\. コントロールレベル（リソースタイプ）を選択します。環境レベルのアクセス権限を制御したい場合は、**`Environment`**を選択します。

3\. アクセスを拒否または許可するリソースを選択します。

* リソースセレクターで、project/explore:env/Devを選択します。これは、アクセス権を割り当てる`product`環境がプロジェクト`explore`に属していることを意味します。複数のリソースを選択できますが、ここでは1つだけを選択します。
* 許可または拒否セレクターで、`Allow`を選択します。
* アクションセレクターで、`Access environments`を選択します。

4\. **[保存]**をクリックします。1つのポリシーに複数の権限を作成できます。

上記で作成した権限により、この権限を持つメンバーはプロジェクト`explore`の`product`環境内のすべてのリソースにアクセスできますが、リソースを変更することはできません。

各ポリシーには複数の権限を追加できます。

## 権限の削除

権限リストから`Remove`ボタンをクリックすると、権限を削除できます。

![](../iam/assets/policies/002.webp)

## メンバーへの権限の割り当て

1\. ポリシー詳細ページに移動し、**[チーム]**タブに切り替えます。

2\. セレクターを`All`に設定すると、組織内のすべてのメンバーが表示されます。

![](../iam/assets/policies/003.webp)

3\. ポリシーを割り当てるメンバーを見つけます。リスト内のメンバーアイテムの**[追加]**ボタンをクリックします。

4\. セレクターを`All`から`Members with current policy`に変更します。現在のポリシーを持つメンバーのみが表示されます。

![](../iam/assets/policies/004.webp)

5\. **[削除]**ボタンをクリックして、ポリシーからメンバーを削除します。

## グループへの権限の割り当て

1\. ポリシー詳細ページに移動し、**[グループ]**タブに切り替えます。

2\. セレクターを`All`に設定すると、組織内のすべてのグループが表示されます。

![](../iam/assets/policies/005.webp)

3\. ポリシーを割り当てるグループを見つけます。リスト内のグループアイテムの**[追加]**ボタンをクリックします。

4\. セレクターを`All`から`Groups with current policy`に変更します。現在のポリシーを持つグループのみが表示されます。

![](../iam/assets/policies/006.webp)

5\. **[削除]**ボタンをクリックして、ポリシーからグループを削除します。

