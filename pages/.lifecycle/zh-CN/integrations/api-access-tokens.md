# API访问令牌

### 概述

本主题将介绍如何使用API访问令牌对FeatBit REST API进行身份验证，以及实施它们的限制和建议。

> API访问令牌是私有的
>
> 只有你可以访问你创建的令牌的秘密值。其他账户成员无法访问它们。管理员可以删除你的令牌，但无法查看其值。

### 设置个人API访问令牌的范围

你可以为API令牌设置范围，限制它们可以执行的操作集。例如，你可以构建一个仅对REST API具有读取访问权限的集成。

### 理解访问令牌的权限

> 个人API访问令牌和最小权限原则
>
> 作为最佳实践，我们建议为集成配置的令牌授予最小所需范围。例如，如果你的集成不用于修改你的生产环境，则根据需要使用特定的权限操作来限制访问权限。

在FeatBit中，有两种类型的令牌可以创建。你可以创建个人令牌，它与账户成员的账户相关联，也可以创建服务令牌，它与创建它的账户无关。

这两种令牌类型在其创建者的权限更改时以不同的方式响应。因此，你可能希望为不同的事物使用不同类型的令牌。

#### 个人令牌

你可以配置个人访问令牌具有与你相同的权限。在FeatBit中，你的个人令牌不能做比你在FeatBit中能做的更多的事情。

如果你的权限被降低，你创建的个人令牌的范围也会降低。例如，如果你拥有“管理功能标志”权限并创建个人令牌，但随后从你的权限中删除该权限，则你的令牌也会降级。如果你使用该令牌向功能标志发出请求，FeatBit将返回以下结果：

```json
{
    "success": false,
    "errors": [
        "Forbidden"
    ],
    "data": null
}
```

如果从FeatBit团队中删除具有个人访问令牌的账户成员，则其个人令牌将被停用。

当你希望临时或个人使用FeatBit API时，请使用个人令牌。

#### 服务令牌

与个人令牌不同，服务令牌不与你的FeatBit个人资料相关联。你可以将现有权限分配给服务令牌，但你不能给服务令牌授予比你自己更多的权限。

创建后，服务令牌的权限将永久固定。你无法编辑服务令牌的权限，即使你的权限发生变化，服务令牌的权限也保持不变。

请使用服务令牌与FeatBit API创建长期集成。

### 创建API访问令牌

你可以从“集成/访问令牌”页面创建API访问令牌。

默认情况下，你创建的令牌是个人令牌。在令牌创建过程中，你可以选择创建服务令牌。

> 立即保存新令牌
>
> 在创建令牌后，你的API访问令牌仅可见一次。如果你离开或刷新显示令牌的页面，它将被隐藏，不再可见。在离开创建页面之前，你必须将新的访问令牌复制并存储在安全的地方，否则你将失去对令牌的访问权限。

下面是“访问令牌”页面的屏幕截图：

![](../integrations/assets/api-access-tokens/001.webp)

创建访问令牌的步骤：

1. 导航到“集成/访问令牌”页面。
2. 点击页面右上方的“添加”按钮，显示“添加访问令牌”面板。

![](../integrations/assets/api-access-tokens/002.png)

3. 为你的令牌取一个人类可读的名称。
4. 从下拉列表中选择令牌的类型。
5. 如果为服务令牌，请分配你要授予的权限。
6. 点击“保存”按钮。
7. 复制并存储令牌在安全的地方。在离开此页面后，令牌将被隐藏。

创建令牌后，你可以编辑它的名称，激活它，停用它或删除它。你还可以从此页面管理现有令牌。

### 管理访问令牌

要管理访问令牌，请执行以下操作：

1. 导航到“集成/访问令牌”页面。
2. 在列表中找到你的令牌。
3. 点击令牌的“溢出菜单”，然后从菜单中选择以下选项：

   * 编辑：修改访问令牌的名称。
   * 激活/停用：切换令牌的状态。仅当令牌为“激活”状态时，才可以使用它。否则，使用该令牌进行的API调用将返回Forbidden响应。
   * 删除：这将删除令牌。如果执行此操作，令牌将无法恢复，也无法再使用。

下面是编辑和删除选项的屏幕截图：

![](../integrations/assets/api-access-tokens/003.png)

### 限制谁可以创建和管理API访问令牌

默认情况下，所有具有“Owner”、“Administrator”或“Developer”权限的账户成员可以创建仅限于其现有权限的访问令牌。与访问令牌资源相关的三个权限如下：

* ListAccessTokens
* ManagePersonalAccessTokens
* ManageServiceAccessTokens

你可以通过添加/删除这些操作来限制账户成员创建或管理访问令牌的权限。下面是与访问令牌相关的IAM策略声明的屏幕截图。

![](../integrations/assets/api-access-tokens/004.png)