# 在生产环境中进行测试

> 什么是 **在生产环境中进行测试**
>
> 不可能复制生产环境。了解功能在现实世界中的表现的唯一可靠方法是与真实用户一起测试它。功能标志为您提供了在生产环境中安全测试所需的控制。利用 FeatBit 的定位功能，将新功能展示给特定用户的子集。如果系统性能受到影响，您可以停止部署并限制事件的影响范围。但是，如果一切顺利，您可以逐步将新功能发布给更广泛的受众。

## 先决条件

我们假设您已经完成了“入门”中的最后 3 个教程：

* 您已成功创建了两个功能标志 `game runner` 和 `difficulty mode`，并在教程[创建两个演示标志](../create-two-feature-flags.md)中完成了创建。
* 您对如何与“Dino Game”演示进行交互有基本经验](../try-interacting-with-the-demo.md)。
* 您知道如何[连接 SDK](../connect-an-sdk/) 到您的程序或“Dino Game”演示：
  * 下载演示代码示例
  * 初始化 SDK
  * 识别具有自定义属性的用户。
  * 实现功能标志以交付和控制功能

## 使用单个用户在生产环境中进行测试

游戏已经在线部署。在向所有玩家发布之前，您想要与一些亲密的朋友一起测试。您可以使用“定位用户”部分将您的朋友添加到“允许名单”中。

转到“game runner”功能标志的定位页面，展开“定位用户”部分。您将看到每个变体和 `true` `false` 的两个选择列表。

要将您的朋友添加到“允许名单”中，我们只需要：

1. 在 `true` 选择列表下添加您朋友的游戏用户名。
2. 打开功能标志。
3. 将默认规则设置为 `false`。

上面的三个步骤告诉 FeatBit，功能标志“game runner”已打开。只有“定位用户”部分真实列表中的用户才能拥有 `true` 变体（可以玩游戏）。

![](../../getting-started/assets/testing-in-production/001.webp)

### 用户来自哪里？

真实列表中的用户可以通过三种方式导入：

1. 在“数据同步”部分，您可以通过预定义的 JSON 文件将所有用户导入 FeatBit。![](../../getting-started/assets/testing-in-production/002.webp)
2. 当用户在正在运行的应用程序中注册时，用户信息将保存到系统中。![](../../getting-started/assets/testing-in-production/003.webp)
3. 您也可以直接在“定位用户”选择列表中输入用户名。如果用户不存在，它将在“最终用户”列表中添加一个新用户。

用户信息可以在“最终用户”页面中找到。

![](../../getting-started/assets/testing-in-production/004.webp)

## 使用 QA 段在生产环境中进行测试

您的朋友喜欢您的游戏，他们希望在向公众发布之前总是测试新功能。他们成为可重用的测试用户（如 QA 团队）。为了让我们下次发布新功能时的工作更轻松，您可以创建一个名为 QA 的区段，每次部署游戏的新功能时都会使用此区段。

转到“区段”页面，创建一个名为“我可爱的 QA 团队”的区段。

![](../../getting-started/assets/testing-in-production/005.webp)

在区段详情页面中，我们将我可爱的测试用户添加到“包含用户”列表中，然后单击保存。此区段可以在不同的功能标志之间共享。

![](../../getting-started/assets/testing-in-production/006.webp)

我们返回功能标志列表并打开“game runner”功能标志的“定位”页面。

1. 移除“定位用户”部分真实列表中的所有用户。
2. 将“我可爱的 QA 团队”添加到自定义规则中。
   1. 添加新的自定义规则并将其命名为“在生产环境中进行测试规则”）。
   2. 选择“用户在区段中”作为 IF 条件。
   3. 选择“我可爱的 QA 团队”部分到部分列表。
   4.  在服务区`true`选择。

![](../../getting-started/assets/testing-in-production/007.webp)

上面的配置意味着如果用户在“我可爱的 QA 团队”段中，DinoGame将发布给该用户。此配置还可以在其他功能标志中实现，以便在生产环境中测试其他功能，例如“难度模式”。

![](../../getting-started/assets/testing-in-production/008.webp)

该区段也称为可重用区段，它可以跨不同的功能标志使用。更新一个区段意味着更新使用此区段的所有功能标志。