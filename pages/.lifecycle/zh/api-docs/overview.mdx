import { Callout } from 'nextra/components'

# API

<Callout type="info">
本文是关于如何向 FeatBit REST API 发起请求的通用介绍，完整的 API 列表及其使用方法，我们提供了一个由 redoc 驱动的文档，可在[这里](https://featbit-tio-eu-api.azurewebsites.net/docs/index.html)查看。如果您在本地或服务器上运行 FeatBit，也可以指向 URL：<strong>URL_OF_API_SERVER/docs。</strong> 例如，如果您在本地机器上运行 FeatBit 并且没有启用 https，则 URL 应为 <strong>http://localhost:5000/docs</strong>。
</Callout>

### 认证

所有 REST API 资源都通过[个人或服务访问令牌](../integrations/api-access-tokens.md)进行认证。不支持其他认证机制。您可以在**集成/访问令牌**页面管理个人访问令牌。

#### 通过请求头进行认证

与 API 进行认证的唯一方式是在请求中添加一个包含您访问令牌的 `Authorization` 头。`Authorization` 头的值必须是您的访问令牌。要了解如何添加此头，请参考[使用 FeatBit REST API](using-featbit-rest-api.md)。

### 数据表示

所有资源都期望并返回 JSON 响应体。错误响应也会发送 JSON 体。要了解更多关于 API 错误格式的信息，请阅读[错误](overview.md#errors)。

这在实践中意味着您总是会收到一个 `Content-Type` 头设置为 `application/json` 的响应。

此外，对于 `PATCH`、`POST` 和 `PUT` 请求，请求体必须编码为 JSON，并且 `Content-Type` 头设置为 `application/json`。

### 错误

API 总是以一种通用格式返回错误。以下是一个示例：

```json
{
    "success": false,
    "errors": [
        "Unauthorized"
    ],
    "data": null
}
```

**errors** 指示了错误的一般类别。

### CORS

FeatBit API 支持跨源资源共享（CORS），适用于来自任何源的 AJAX 请求。如果请求中包含 `Origin` 头，则它会被回显为一个明确允许的源。否则，请求将返回一个通配符 `Access-Control-Allow-Origin: *`。有关 CORS 的更多信息，请阅读[CORS W3C 推荐标准](http://www.w3.org/TR/cors)。CORS 头的示例如下：

```
Access-Control-Allow-Headers: Accept, Content-Type, Content-Length, Accept-Encoding, Authorization
Access-Control-Allow-Methods: OPTIONS, GET, DELETE, PATCH
Access-Control-Allow-Origin: *
Access-Control-Max-Age: 300
```

您可以像进行同源调用一样进行认证的 CORS 调用，使用访问令牌认证。您不应将访问令牌暴露给不受信任的实体。
