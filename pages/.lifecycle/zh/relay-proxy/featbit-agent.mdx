import { Callout } from 'nextra/components'

# FeatBit 代理

<Callout type="info">
这是对 FeatBit Agent 的一般介绍，如果您正在寻找 FeatBit Agent 的安装详细说明，请参考此[文档](https://github.com/featbit/featbit-agent#installation)。
</Callout>


FeatBit 代理（GitHub 仓库在[这里](https://github.com/featbit/featbit-agent)）是一个介于 FeatBit 服务器和您的 SDKs 之间的小型程序，提供了一个缓存的只读副本和 FeatBit 服务器的中继代理。这意味着您可以扩展 FeatBit 以服务数以万计的连接 SDK，而不会增加 FeatBit 服务器的负载。

FeatBit 代理提供四个重要特性：

* **性能**：FeatBit 代理在内存中缓存功能标志和细分市场。一个在资源最少的机器上运行的单个 FeatBit 代理实例可以支持数千个 WebSocket 连接，您可以将其扩展以支持数以万计的 WebSocket 连接，而无需增加 FeatBit 服务器的负载。&#x20;
* **低延迟**：FeatBit 代理能够在接近最终用户的位置运行，显著减少了距离 FeatBit 服务器较远的用户的延迟。
* **数据保护**：当您在客户的基础设施上部署 FeatBit 代理时，您可以配置它不向 FeatBit 服务器转发用户使用数据并在本地保留数据，或者在将数据发送到 FeatBit 服务器之前进行数据匿名化处理。这确保了符合 GDPR 和其他数据保护法规，并促进了用户数据和隐私的保护。
* **弹性**：FeatBit 代理设计用于在重启后能够正常运行，即使您失去了与 FeatBit 服务器的连接。

## 概念

FeatBit 代理支持两种不同模式：

* 代理模式：连接到 FeatBit 服务器，支持动态功能标志、细分市场和环境密钥的同步以及其他高级功能。
* 离线模式：不连接到 FeatBit 服务器，完全控制数据和环境密钥。

### 代理模式

![](../relay-proxy/assets/featbit-agent/001.webp)

代理模式是默认模式，在大多数情况下应作为默认选项。它连接到 FeatBit 服务器，并使用它作为功能标志、细分市场和环境密钥的真实数据源。

用户使用数据可以配置为保留在代理上，或者在发送到 FeatBit 服务器之前进行匿名化处理。

默认情况下，代理模式使用内存缓存来存储它从 FeatBit 服务器获取的特性。然而，您可能希望使用更持久的存储解决方案。为此，FeatBit 代理支持使用 Redis 或备份文件，您可以在启动代理时传入配置。FeatBit 代理将在启动时检查是否指定了持久备份选项，如果是，它将使用它来填充其内部缓存。如果您的 FeatBit 服务器无法访问，这将非常有用。

当使用 Redis 作为存储解决方案时，多个代理可以共享同一个 Redis 实例，允许 FeatBit 代理水平扩展到一个集群并保持数据一致性。

### 离线模式

![](../relay-proxy/assets/featbit-agent/002.webp)

当您没有连接到 FeatBit 服务器时，应使用离线模式。当您需要完全控制客户端接收的数据和可以用来访问它的环境密钥时，也可以使用此模式。

由于此模式不连接到 FeatBit 服务器，它需要功能标志、细分市场和环境密钥的 JSON 转储。您可以通过在 FeatBit UI 上创建一个中继代理或使用包含数据的转储文件来启动代理，从而配置 FeatBit 服务器将此转储发送到您的 FeatBit 代理实例。
