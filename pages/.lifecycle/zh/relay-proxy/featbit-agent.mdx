
从 'nextra/components' 导入 { Callout }

# FeatBit 代理

<Callout type="info">
This is a general introduction of FeatBit Agent, if you are looking for detailed instructions of installing FeatBit Agent, please refer to this [doc](https://github.com/featbit/featbit-agent#installation).
</Callout>


FeatBit 代理（the GitHub repo is [here](https://github.com/featbit/featbit-agent)）是一个小型程序，位于 FeatBit 服务器和您的 SDKs 之间，提供一个缓存的只读副本和一个中继代理。这意味着您可以扩展 FeatBit 以便为数以万计连接的 SDK 提供服务，而不会增加 FeatBit 服务器的负载。

FeatBit 代理提供四个重要功能：

* **性能**：FeatBit 代理在内存中缓存功能标志和段。即使是在资源最少的计算机上运行的单个 FeatBit 代理实例也可以支持数千个 WebSocket 连接，您可以扩展它以支持数以万计的 WebSocket 连接，而无需增加 FeatBit 服务器的负担。 

* **低延迟**：FeatBit 代理能够部署在靠近最终用户的位置，显著降低远离 FeatBit 服务器用户的延迟。
* **数据保护**：当您在客户的基础架构上部署 FeatBit 代理时，您可以配置它不将用户使用数据转发至 FeatBit 服务器并在本地保留，或者在发送至 FeatBit 服务器前进行数据匿名化。这有助于遵守 GDPR 和其他数据保护法规，促进用户数据和隐私的保护。
* **弹性**：即使在重新启动后或失去与 FeatBit 服务器的连接时，FeatBit 代理也能正常运行。

## 概念

FeatBit 代理支持两种不同模式：

* 代理模式：连接至 FeatBit 服务器，支持动态功能标志、段落和环境密钥同步等高级功能。
* 离线模式：不连接至 FeatBit 服务器，完全控制数据和环境密钥。

### 代理模式

![](../relay-proxy/assets/featbit-agent/001.webp)

代理模式是默认模式，在大多数情况下应作为首选。它连接至 FeatBit 服务器，并以其为功能标志、段落和环境密钥的权威数据源。

用户使用数据可以配置为保留在代理中，或在发送至 FeatBit 服务器之前进行匿名化处理。

默认情况下，代理模式使用内存缓存存储从 FeatBit 服务器获取的功能。但是，您可能想要使用更持久的存储解决方案。为此，FeatBit 代理支持使用 Redis 或备份文件，您可以在启动代理时传递参数来配置。FeatBit 代理将在启动时检查是否指定了持久备份选项，如果是，将使用它来填充其内部缓存。在 FeatBit 服务器不可访问时，这一点尤其有用。

当使用 Redis 作为存储解决方案时，多个代理可以共享同一个 Redis 实例，这允许 FeatBit 代理水平扩展到一个集群，并保持数据一致性。

### 离线模式

![](../relay-proxy/assets/featbit-agent/002.webp)

当您无法连接到 FeatBit 服务器时，应使用离线模式。当您需要完全控制客户端接收的数据以及可用于访问这些数据的环境密钥时，也适合使用离线模式。

由于此模式不连接至 FeatBit 服务器，因此它需要功能标志、段落和环境密钥的 JSON 转储。您可以配置 FeatBit 服务器向您的 FeatBit 代理实例发送此转储，方法是在 FeatBit UI 上创建一个中继代理或使用包含数据的转储文件启动代理。
