import { Callout } from 'nextra/components'

# FeatBit 代理

<Callout type="info">
这是 FeatBit 代理的一般介绍，如果您正在寻找有关安装 FeatBit 代理的详细说明，请参阅此 [文档](https://github.com/featbit/featbit-agent#installation)。
</Callout>


FeatBit 代理（GitHub 仓库在[这里](https://github.com/featbit/featbit-agent)）是一个小型程序，位于 FeatBit 服务器和您的 SDK 之间，既提供了 FeatBit 服务器的缓存只读副本，又充当了中继代理。这意味着您可以通过 FeatBit 代理将 FeatBit 服务器的负载分担到数以万计的连接的 SDK 上，而不会增加 FeatBit 服务器的负载。

FeatBit 代理提供了四个重要功能：

* **性能**：FeatBit 代理将功能标志和段缓存在内存中。在资源最少的机器上运行的单个 FeatBit 代理实例即可支持数千个 WebSocket 连接，您甚至可以将其扩展以支持数以万计的 WebSocket 连接，而无需复制 FeatBit 服务器。&#x20;
* **低延迟**：FeatBit 代理具有在最终用户附近运行的能力，从而显著降低远离 FeatBit 服务器的用户的延迟。
* **数据保护**：在您的客户基础设施上部署 FeatBit 代理后，您可以将其配置为要么不将用户使用数据转发到 FeatBit 服务器并将数据保留在本地，要么在将数据发送到 FeatBit 服务器之前执行数据匿名化。这确保了符合 GDPR 和其他数据保护法律，并促进了对用户数据和隐私的保护。
* **弹性**：FeatBit 代理被设计为能够在重新启动后正常运行，并且即使失去与 FeatBit 服务器的连接，也能正常运行。

## 概念

FeatBit 代理支持两种不同的模式：

* 代理：连接到 FeatBit 服务器，支持动态功能标志、段和环境密钥的同步以及其他高级功能。
* 离线：不连接到 FeatBit 服务器，完全控制数据和环境密钥。

### 代理模式

![](../relay-proxy/assets/featbit-agent/001.webp)

代理是默认模式，在大多数情况下应该默认使用。它连接到 FeatBit 服务器，并将其用作功能标志、段和环境密钥的真实来源。

用户使用数据可以配置为保留在代理上，或者在发送到 FeatBit 服务器之前进行匿名处理。

默认情况下，代理模式使用内存中的缓存来存储从 FeatBit 服务器获取的功能。但是，您可能希望使用更持久的存储解决方案。为此，FeatBit 代理支持 Redis 或备份文件，您可以在启动代理时传入来配置。然后，FeatBit 代理将在启动时检查是否指定了持久备份选项，如果是，则将使用它来填充其内部缓存。如果您的 FeatBit 服务器无法访问，这将非常有用。

当使用 Redis 作为存储解决方案时，多个代理可以共享同一个 Redis，从而允许 FeatBit 代理水平扩展到集群，并保持数据一致性。

### 离线模式

![](../relay-proxy/assets/featbit-agent/002.webp)

当您没有连接到 FeatBit 服务器时，应该使用离线模式。当您需要完全控制客户端接收的数据以及可用于访问它的环境密钥时，也可以使用它。

由于此模式不连接到 FeatBit 服务器，因此它需要功能标志、段和环境密钥的 JSON 转储。您可以通过在 FeatBit UI 上创建中继代理，或者通过使用包含数据的转储文件启动代理来配置 FeatBit 服务器将此转储发送到您的 FeatBit 代理实例。
