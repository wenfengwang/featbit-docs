# 中继代理

## 概述 

本主题介绍如何创建 FeatBit 中继代理配置，以及如何将 FeatBit 代理连接到该配置。如果您不知道什么是 FeatBit 代理，请阅读此[文档](featbit-agent.md)。

## 代理状态

FeatBit UI 显示以下代理状态：

* 健康：代理处于良好状态，一切正常
* 不健康：代理出现问题
* 无法访问：代理不可用。通常是因为代理尚未启动或代理主机 URL 不正确
* 未经授权：如果看到此内容，表示您用于启动 FeatBit 代理的 ApiKey 与中继代理密钥不匹配

## 限制谁可以创建和管理中继代理 

要能够创建中继代理配置，您必须具有 **ManageRelayProxies** 和 **ListRelayProxies** 权限。如果您拥有内置策略之一（所有者、管理员、开发人员），则您已经具备这些权限。

![](../relay-proxy/assets/relay-proxy/001.webp)

## 创建中继代理配置

您可以从“中继代理”页面创建中继代理配置。

1. 导航至“中继代理”页面。

![](../relay-proxy/assets/relay-proxy/002.png)
2. 单击页面右上角的“添加”按钮，即可打开“添加中继代理”面板\
![](../relay-proxy/assets/relay-proxy/003.png)
3. 为您的令牌提供一个人类可读的 **名称** 和描述**。
4. 设置范围：选择要将功能标志和分段同步到代理的环境。
5. 设置代理名称和主机
6. 单击 **保存** 按钮。
7. 将密钥复制并保存在安全的位置。离开此页面后，密钥将被隐藏。

![](../relay-proxy/assets/relay-proxy/004.png)

创建中继代理后，您可以对其进行编辑或删除。您还可以从此页面管理现有的中继代理。

## 将功能标志和分段同步到代理

目前，我们仅支持手动同步。要执行此操作，单击中继代理的“编辑”按钮，然后单击编辑面板中的“同步”按钮，即可将所选范围的功能标志和分段同步到代理。

![](../relay-proxy/assets/relay-proxy/005.png)

## 检查 FeatBit 代理状态

代理可能具有不同的状态。要对其进行更新或调试问题，单击状态标签，即可打开包含代理详细状态的模态框。**lastSyncAt** 值采用 UTC 时区。

![](../relay-proxy/assets/relay-proxy/006.png)

## 管理中继代理

要管理中继代理：

1. 导航至“中继代理”页面。
2. 在列表中找到您的代理。
3. 单击 **编辑** 或 **移除** 按钮。

您可以检查中继代理的状态：

* 当其所有代理都处于健康状态时，颜色为 **绿色**
* 如果至少一个代理不处于健康状态，则颜色为 **红色**

![](../relay-proxy/assets/relay-proxy/007.png)

## 将 FeatBit 代理连接到 FeatBit UI

创建中继代理配置后，您应该将密钥保存在某个安全的位置，并将该密钥用作启动 FeatBit 代理时的 ApiKey 参数值，请阅读 [安装 FeatBit 代理](https://github.com/featbit/featbit-agent#installation)。