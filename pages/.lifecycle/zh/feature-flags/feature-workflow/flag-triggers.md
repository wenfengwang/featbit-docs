# 标志触发器

### 概述 

本主题解释了如何使用 FeatBit 的标志触发器功能，该功能允许您从第三方应用程序（如 APM 工具）远程更改标志的定位。您可以使用触发器来开启或关闭标志的定位。

### 了解标志触发器的作用 

触发器允许您使用唯一的 Webhook URL 远程触发标志的更改。触发器与您现有的工具集成，让您在达到特定操作运行状况阈值或收到某些警报时启用或禁用标志。一个标志可以附加多个触发器，连接到多个工具或警报。

触发器的工作原理是创建唯一的 URL，将功能标志连接到第三方工具。当第三方工具生成特定警报时，触发器会将标志的定位设置为**“开启”**或**“关闭”**。

每个 URL 控制一个操作，并且这些 URL 是彼此不同的。对标志的**“开启”** URL 的后续请求不会在初始联系人将标志**“开启”**后更改标志的状态。

#### 了解标志触发器的安全性

尽管标志触发器使用公共 URL，但它们仍然是一种非常安全的方法，用于启动对功能标志的更改。原因如下：

* 触发器使用不可预测的 URL，以及
* 只有您 FeatBit 项目中的某些人可以创建或修改触发器。

不可预测的 URL 在功能上类似于访问令牌，因为它不需要 FeatBit 和其他服务之间的活动连接即可工作。要了解更多关于不可预测的 URL 的信息，请阅读 [Google 的不可预测的 URL](https://www.schneier.com/blog/archives/2015/07/googles\_unguess.html)。

创建新触发器时，其 URL 仅显示一次，并提示您在本地复制。初始显示后，URL 会被隐藏，因此标志的**“触发器”**选项卡的未来查看者无法查看它们。

如果您丢失了触发器的 URL，可以从触发器的底部操作区域重置它。

#### 创建新的标志触发器 

您可以从标志的**“触发器”**选项卡为单个功能标志创建触发器。

要创建触发器：

1. 导航到要创建触发器的功能标志，然后单击其**“触发器”**选项卡。
2. 单击**“添加”**按钮。将会出现“创建触发器”对话框：\

![](../../feature-flags/assets/feature-workflow/flag-triggers/001.png)

3. 从**“类型”**菜单中选择要使用的工具。您还可以选择**“通用”**来创建一个不与任何特定工具相关联的触发器。
4. 从**“操作”**菜单中选择要使用触发器执行的操作。
5. 单击**“确定”**。将会出现确认消息，并且触发器将显示在标志的**“触发器”**选项卡中。
6. 复制并保存唯一的触发器 URL。您必须现在这样做。离开此页面后，触发器 URL 将被隐藏，您将无法再次查看它：

您已为标志创建了新的触发器。如有必要，可以通过单击**“添加”**来创建更多触发器。

### 管理现有标志触发器

您可以从标志的**“触发器”**选项卡修改现有的触发器。创建触发器后，您可以禁用、重置或删除它。

要修改现有的触发器：

1. 导航到要编辑触发器的功能标志，然后单击其**“触发器”**选项卡。
2. 找到要修改的触发器。
3.  从操作区域中选择您想要的选项：


![](../../feature-flags/assets/feature-workflow/flag-triggers/002.png)

* **“禁用”**：如果选择此选项，则会保存触发器配置，但触发器将停止工作。要重新启用触发器，请将切换开关切换为**“启用”**
* **“重置 URL”**：如果选择此选项，FeatBit 会为此触发器生成一个新的 URL。如果丢失了现有触发器的 URL，请使用此选项。您必须更新使用此 URL 的任何客户端才能使用新 URL。单击**“重置”**以生成新的 URL。
* **“删除”**：如果选择此选项，触发器及其 URL 将被永久删除。单击**“删除”**以删除触发器。

## 调用触发器

要调用触发器，请向触发器的**URL**发出**POST**请求，不需要其他参数。例如，使用 curl，您可以执行以下操作：

```bash
curl -X POST http://localhost:5000/api/v1/triggers/run/MTQyMDY5OTI0ODc2MQw4yPzGndlkezFEsZE_uPnA
```
