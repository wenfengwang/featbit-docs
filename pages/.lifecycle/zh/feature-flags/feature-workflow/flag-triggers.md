
# 功能标记触发器

### 概览

本主题阐述了如何使用FeatBit的功能标记触发器特性，它允许您通过第三方应用程序（例如APM工具）远程修改功能标记的目标设置。您可以使用触发器来开启或关闭功能标记的目标设置。

### 理解功能标记触发器的作用

触发器让您能够利用一个独特的Webhook URL远程发起对功能标记的变更。触发器能与您现有的工具整合，当您达到特定的运维健康阈值或收到特定警报时，允许您启用或禁用功能标记。一个功能标记可以连接多个触发器，这些触发器可以关联到多个工具或警报。

触发器的工作原理是创建独特的URL，将功能标记与第三方工具连接起来。当第三方工具触发一个特定的警报时，触发器会将功能标记的定位设置为**开启**或**关闭**。

每个URL控制一个动作，且这些URL彼此独立。在最初的设置将功能标记定位为**开启**之后，再次对该URL的请求将不会改变功能标记的状态。

#### 理解功能标记触发器的安全性

尽管功能标记触发器使用的是公开的URL，它们依然是一种非常安全的方式来发起对您功能标记的更改。原因如下：

* 触发器使用难以预测的URL，以及
* 只有**FeatBit**项目中的特定人员可以创建或修改触发器。

难以预测的URL在功能上类似于访问令牌，它不需要FeatBit与其他服务之间的活跃连接就可以工作。要了解更多关于难以预测的URL，请阅读[谷歌的Unguessable URLs](https://www.schneier.com/blog/archives/2015/07/googles\_unguess.html)。

当您创建一个新触发器时，它的URL只会显示一次，并提示您将其复制到本地。在最初显示之后，这些URL将被隐藏，所以未来查看功能标记的**触发器**标签页的人将无法看到它们。

如果您遗失了触发器的URL，您可以从触发器的底部操作区重置它。

#### 创建新的功能标记触发器

您可以从功能标记的**触发器**标签页为单独的功能标记创建触发器。

创建触发器的步骤如下：

1. 导航至您想要创建触发器的功能标记，并单击进入其**触发器**标签页。
2.  点击**添加**按钮。此时会弹出“创建触发器”对话框：

![](../../feature-flags/assets/feature-workflow/flag-triggers/001.png)

3. 从**类型**菜单中选择您希望使用的工具。您也可以选择"通用"，以创建一个不与任何特定工具关联的触发器。
4. 从“**动作**”菜单中选择您希望触发器执行的操作。
5. 点击 **确定**。确认信息会显示，并且触发器将出现在功能标记的 **触发器** 标签页中。
6. 复制并保存独特的触发器URL。您必须立即这样做。一旦您离开这个页面，触发器的URL将会被隐藏，您将无法再次查看它：

您已经为您的功能标记创建了一个新触发器。您可以通过点击**添加**来创建更多触发器。

### 管理现有的功能标记触发器

您可以从功能标记的**触发器**标签页修改现有的触发器。创建触发器之后，您可以禁用、重置或删除它。

修改现有触发器的步骤如下：

1. 导航至您想要编辑触发器的功能标记，并点击进入其**触发器**标签页。
2. 找到您想要修改的触发器。
3.  从操作区选择您想要的选项：

![](../../feature-flags/assets/feature-workflow/flag-triggers/002.png)

* “禁用”：如果选择此选项，触发器的配置将被保存，但触发器将停止工作。要重新启用触发器，请将开关切换到“启用”。
* “重置URL”：如果选择此选项，FeatBit将为该触发器生成一个新的URL。如果您遗失了现有触发器的URL，请使用此选项。您必须更新所有使用该URL的客户端以使用新的URL。点击**重置**生成新的URL。
* “移除”：如果选择此选项，触发器及其URL将被永久删除。点击**移除**可删除该触发器。

## 调用触发器

要调用触发器，请对触发器的**URL**发起**POST**请求，无需其他参数。例如，使用curl，您可以这样做：

```bash
curl -X POST http://localhost:5000/api/v1/triggers/run/MTQyMDY5OTI0ODc2MQw4yPzGndlkezFEsZE_uPnA
```
