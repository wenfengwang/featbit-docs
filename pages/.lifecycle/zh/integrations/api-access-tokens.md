
# API 访问令牌

### 概览

本主题旨在解释如何使用 API 访问令牌进行 FeatBit REST API 的身份验证，并提供实施这些令牌时的限制和建议。

> API 访问令牌是私密的
> 只有您能够访问您创建的令牌的秘密值。其他账户成员无法获取它们。管理员可以删除您的令牌，但无法查看它们的值。

### 限定个人 API 访问令牌的范围

您可以对 API 令牌的权限范围进行限定，以限制它们能够执行的操作集合。例如，您可以构建一个仅具有对 REST API 读取权限的集成。

### 理解访问令牌权限

> 个人 API 访问令牌与最小权限原则
> 作为一项最佳实践，我们建议您为令牌设置尽可能小的权限范围，以满足您集成的需求。例如，如果您的集成无需修改生产环境，那么您可以根据需要选择特定的权限操作来适当限制访问。

在 FeatBit 中，您可以创建两种类型的令牌：个人令牌和服务令牌。个人令牌与账户成员的账户关联，而服务令牌则独立于创建它的账户。

不同类型的令牌在其创建者的权限发生变化时，会有不同的反应。因此，您可能希望根据不同的用途使用不同类型的令牌。

#### 个人令牌

您可以配置个人访问令牌，使其拥有与您相同的权限。您的个人令牌绝不能超出您在 FeatBit 中的权限范围。

如果您自己的权限被降低，您创建的个人令牌的权限范围也会相应减少。例如，如果您拥有**ManageFeatureFlag**权限并创建了一个个人令牌，但后来该权限被撤销，您的令牌同样会受到限制。如果您使用该令牌发起对功能标志的请求，FeatBit会返回以下结果：

```json
{
    "success": false,
    "errors": [
        "Forbidden"
    ],
    "data": null
}
```

如果拥有个人访问令牌的账户成员被移出您的 FeatBit 团队，他们的个人令牌将被停用。

当您希望临时或个人使用 FeatBit API 时，可以使用个人令牌。

#### 服务令牌

与个人令牌不同，服务令牌并不与您的 FeatBit 个人资料挂钩。您可以为服务令牌分配现有的权限，但您不能赋予服务令牌超出您当前权限的权限。

服务令牌的权限在创建后便永久固定，您不能更改服务令牌的权限，即便您自己的权限发生变化，服务令牌的权限也不会改变。

使用服务令牌可以创建与 FeatBit API 的长期集成。

### 创建 API 访问令牌

您可以在**集成/访问令牌**页面创建API访问令牌。

默认情况下，您创建的令牌为个人令牌。您也可以在令牌创建流程中选择创建服务令牌。

> 立即保存新令牌
> 您的 API 访问令牌在创建后只会显示一次。如果您离开或刷新显示令牌的页面，令牌将被隐藏且不再显示。因此，在离开创建页面之前，您必须复制并将新的访问令牌存储在安全的地方，否则您将无法再次访问该令牌。

下面是访问**令牌**页面的截图：

![](../integrations/assets/api-access-tokens/001.webp)

创建访问令牌的步骤如下：

1. 导航至**集成/访问** **令牌**页面。
2.  点击页面右上角的**添加**按钮，将出现**添加访问令牌**面板。

![](../integrations/assets/api-access-tokens/002.png)

3. 为您的令牌起一个易于理解的**名称**。
4. 从下拉菜单中选择令牌的类型。
5. 如果是服务令牌，分配您希望授予令牌的权限。
6. 点击**保存**按钮。
7. 复制并安全保存令牌。一旦您离开此页面，令牌将被隐藏。

创建令牌后，您可以编辑其名称、激活、停用或删除它。您也可以在此页面管理现有的令牌。

### 管理访问令牌

要管理一个访问令牌，请：

1. 导航至“**集成/访问** **令牌**”页面。
2. 在列表中找到您的令牌。
3. 点击**溢出菜单**以获取令牌，并从菜单中进行选择：

   * 编辑：修改访问令牌的名称。
   * 激活/停用：切换令牌的状态。只有当令牌的状态为**激活**时，才能使用该令牌。否则，使用该令牌进行的 API 调用将返回“禁止访问”的响应。
   * 删除：这允许您删除令牌。一旦执行此操作，令牌将无法恢复，且永远无法再使用。

下面是编辑和删除选项的截图：

![](../integrations/assets/api-access-tokens/003.png)

### 限制创建和管理 API 访问令牌的权限

默认情况下，所有具有**所有者**、**管理员**或**开发者**权限的账户成员都可以创建限于其现有权限的访问令牌。与访问令牌资源相关的权限有三种：

* ListAccessTokens
* ManagePersonalAccessTokens
* ManageServiceAccessTokens

您可以通过在 IAM 策略中添加或移除这些操作来限制账户成员创建或管理访问令牌。下面是与访问令牌相关的 IAM 策略声明的截图。

![](../integrations/assets/api-access-tokens/004.png)
