# API 访问令牌

### 概述

本主题将解释如何使用 API 访问令牌对 FeatBit REST API 进行身份验证，以及实施它们的约束和建议。

> API 访问令牌是私密的
>
> 只有您可以访问您创建的令牌的机密值。其他帐户成员无法访问它们。管理员可以删除您的令牌，但无法查看其值。

### 个人 API 访问令牌的范围 

您可以限定 API 令牌的范围，以限制它们可以执行的一组操作。例如，您可以构建一个仅具有对 REST API 的读取访问权限的集成。

### 理解访问令牌权限 

> 个人 API 访问令牌和最小权限原则
>
> 作为最佳实践，我们建议为令牌提供集成所需的最小范围。例如，如果您的集成不打算修改生产环境，则根据您的需求使用特定的权限操作来适当地限制访问。

在 FeatBit 中，您可以创建两种类型的代币。您可以创建个人令牌（链接到帐户成员的帐户），也可以创建服务令牌（独立于创建它的帐户）。

不同类型的令牌在其创建者的权限发生更改时会有不同的响应。因此，您可能希望针对不同的事物使用不同类型的令牌。

#### 个人令牌 

您可以配置个人访问令牌具有与您相同的权限。在 FeatBit 中，您的个人令牌永远不会比您拥有的权限更多。

如果您自己的权限减少，那么您创建的个人令牌的范围也会减小。例如，如果您拥有 **ManageFeatureFlag** 权限并创建了个人令牌，但随后失去了该权限，那么您的令牌也会被降级。如果您使用该令牌请求功能标志，FeatBit 将返回以下结果：

```json
{
    "success": false,
    "errors": [
        "Forbidden"
    ],
    "data": null
}
```

如果具有个人访问令牌的帐户成员从您的 FeatBit 团队中移除，那么他们的个人令牌将被停用。

当您需要临时或个人使用时，请使用个人令牌访问 FeatBit API。

#### 服务令牌 

与个人令牌不同，服务令牌不与您的 FeatBit 配置文件绑定。您可以为服务令牌分配现有权限，但绝不能为服务令牌授予比您拥有的权限更多的权限。

创建服务令牌后，其权限将永久固定。您无法编辑服务令牌的权限，即使您的权限发生更改，服务令牌的权限也将保持不变。

使用服务令牌创建与 FeatBit API 的长期集成。

### 创建 API 访问令牌 

您可以从 **集成/访问令牌** 页面创建 API 访问令牌。

默认情况下，您创建的令牌是个人令牌。您可以选择在令牌创建工作流程中创建服务令牌。

> 立即保存新令牌
>
> 您创建的 API 访问令牌在创建后立即可见一次。如果您离开或刷新显示令牌的页面，该页面将被遮挡，令牌将不再可见。在离开创建页面之前，您必须将新的访问令牌复制并存储在安全的位置，否则您将失去对令牌的访问权限。

以下是 **访问令牌** 页面的屏幕截图：

![](../integrations/assets/api-access-tokens/001.webp)

要创建访问令牌，请执行以下操作：

1. 导航到 **集成/访问令牌** 页面。
2. 单击页面右上角的 **添加** 按钮，将显示 **添加访问令牌** 面板\

![](../integrations/assets/api-access-tokens/002.png)

3. 为您的令牌指定一个人类可读的 **名称。**
4. 从下拉列表中选择令牌的类型。
5. 如果是服务令牌，分配要授予令牌的权限。
6. 单击 **保存** 按钮。
7. 将令牌复制并保存在安全的位置。离开此页面后，令牌将被遮盖。

创建令牌后，您可以编辑其名称、激活、停用或删除它。您还可以从此页面管理现有令牌。

### 管理访问令牌 

要管理访问令牌，请执行以下操作：

1. 导航到 **集成/访问令牌** 页面。
2. 在列表中找到您的令牌。
3. 单击令牌的溢出菜单，然后从菜单中选择：\

   * 编辑：修改访问令牌的名称。
   * 激活/停用：切换令牌的状态。仅当令牌状态为 **活动** 时才能使用。否则，使用该令牌进行的 API 调用将返回禁止响应。
   * 删除：这将删除令牌。如果执行此操作，令牌将永远无法恢复，也永远无法再使用。

以下是编辑和删除选项的屏幕截图：

![](../integrations/assets/api-access-tokens/003.png)

### 限制谁可以创建和管理 API 访问令牌 

默认情况下，所有具有 **所有者**、**管理员** 或 **开发人员** 策略的帐户成员都可以创建仅限于其现有权限的访问令牌。与访问令牌资源相关的权限有三个：

* ListAccessTokens
* ManagePersonalAccessTokens
* ManageServiceAccessTokens

您可以通过添加/删除这些操作来限制帐户成员使用 IAM 策略创建或管理访问令牌。以下是与访问令牌相关的 IAM 策略语句的屏幕截图。

![](../integrations/assets/api-access-tokens/004.png)
