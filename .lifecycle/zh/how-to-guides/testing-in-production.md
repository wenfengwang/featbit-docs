
# 在生产环境中进行测试

> 什么是 **生产中的测试**
> 复制生产环境是不可能的。了解功能在现实世界中的表现唯一可靠的方法是与真实用户进行测试。功能标志给您提供了在生产环境中安全测试所需的控制。利用FeatBit的目标定位功能，向特定的用户子集展示新功能。如果系统性能遭受影响，您可以中止推出并限制事件的影响范围。但如果一切进展顺利，您可以逐渐向更广泛的受众发布新功能。

## 先决条件

我们假设你已经完成了“入门”中的最后三个教程：

* 您已成功在教程[为演示创建 2 个功能标志](../create-two-feature-flags.md)中创建了两个特性标志`game runner`和`difficulty mode`。
* 您对如何[与“`Dino Game`”演示进行交互](../try-interacting-with-the-demo.md)有基本经验。
* 您知道如何[连接一个 SDK](../connect-an-sdk/)到您的程序或者“恐龙游戏”演示：
  * 下载一个演示代码样本
  * 初始化 SDK
  * 使用自定义属性识别用户。
  * 实现一个功能标志来交付和控制该功能

## 在生产环境中使用单个用户进行测试

该游戏已经在线上部署。在向所有玩家发布之前，您可能想要先与一些亲近的朋友进行测试。您可以使用“目标用户”部分将您的朋友添加到“白名单”中。

转到您的“游戏运行者”功能标志的目标页面，展开“目标用户”部分。您将会看到每个变体`true`和`false`的两个选择列表。

要把你的朋友加入到“允许名单”，我们只需：

1. 将您朋友的游戏用户名添加到下面的选择列表 `true`。
2. 开启功能标志。
3. 将默认规则设置为 `false`。

上述三个步骤告诉FeatBit，特性标志“游戏运行器”已经被打开。只有在“目标用户”部分的真实列表中的用户才能获得`true`变体（可以玩游戏）。

![](../../getting-started/assets/testing-in-production/001.webp)

### 用户来自哪里？

真实列表中的用户可以通过三种方式被导入：

1. 在“数据同步”部分，您可以通过预定义的 JSON 文件将所有用户导入到 FeatBit。![](../../getting-started/assets/testing-in-production/002.webp)
2. 当用户在您的运行中应用程序注册时，用户信息会被保存到系统中。
![](../../getting-started/assets/testing-in-production/003.webp)
3. 您也可以直接在“目标用户”选择列表中输入用户名。如果用户不存在，系统将会在“终端用户”列表中添加一个新用户。

用户信息可以在“终端用户”页面中找到。

![](../../getting-started/assets/testing-in-production/004.webp)

## 在生产环境中使用 QA 环节进行测试

你的朋友们喜欢你的游戏，他们想要在新功能对外发布前总是能够先行测试。他们变成了类似QA团队的可重复使用的测试用户。为了让我们下次发布新功能时工作更加轻松，你可以创建一个名为QA的用户群组，每次你部署游戏新功能时都将使用这个群组。

转到“Segments”页面，创建一个名为“my lovely QA team”的区段。

![](../../getting-started/assets/testing-in-production/005.webp)

在细分详情页面中，我们将我喜爱的测试用户添加到“包括用户”列表中，然后点击保存。这个细分可以跨不同的功能标志共享。

![](../../getting-started/assets/testing-in-production/006.webp)

我们回到功能标志列表并打开“游戏运行器”功能标志的“目标设置”页面。

1. 移除“目标用户”部分的真实列表中的所有用户。
2. 将“我的可爱的 QA 团队”添加到自定义规则中。
   1. 添加一个新的自定义规则并命名它（例如，“生产环境测试规则”）。
   2. 选择“用户在细分中”作为 IF 条件。
   3. 在部分列表中选择“我的可爱QA团队”部分。
   4.  在服务区选择`true`。

![](../../getting-started/assets/testing-in-production/007.webp)

上述配置意味着，如果用户属于“我可爱的QA团队”这个细分群体，DinoGame将对这些用户开放。这种配置也可以应用于其他功能标志，以便在生产环境中对其他特性进行测试，比如“难度模式”。

![](../../getting-started/assets/testing-in-production/008.webp)

该段落也被称为可复用段落，它可以在不同的特性标志中使用。更新一个段落意味着更新所有使用该段落的特性标志。
